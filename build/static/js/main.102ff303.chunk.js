(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(27),c=r.n(a),s=r(7),o=r(48),i=r(82),d=r(83),u=r(19),l="FOOD_LIST_REQUEST",j="FOOD_LIST_SUCCESS",p="FOOD_LIST_FAIL",b="MY_FOOD_LIST_REQUEST",O="MY_FOOD_LIST_SUCCESS",h="MY_FOOD_LIST_FAIL",f="FOOD_DETAILS_REQUEST",x="FOOD_DETAILS_SUCCESS",m="FOOD_DETAILS_FAIL",g="FOOD_DELETE_REQUEST",y="FOOD_DELETE_SUCCESS",v="FOOD_DELETE_FAIL",S="FOOD_ADD_REQUEST",E="FOOD_ADD_SUCCESS",I="FOOD_ADD_FAIL",_="FOOD_EDIT_REQUEST",C="FOOD_EDIT_SUCCESS",R="FOOD_EDIT_FAIL",L="FOOD_EDIT_RESET",T="GET_PUBLIC_RESTAURANT_MENU_REQUEST",U="GET_PUBLIC_RESTAURANT_MENU_SUCCESS",w="GET_PUBLIC_RESTAURANT_MENU_FAIL",k="RESTAURANT_USER_LOGIN_REQUEST",A="RESTAURANT_USER_LOGIN_SUCCESS",N="RESTAURANT_USER_LOGIN_FAIL",F="RESTAURANT_USER_LOGOUT",D="RESTAURANT_USER_REG_REQUEST",G="RESTAURANT_USER_REG_SUCCESS",M="RESTAURANT_USER_REG_FAIL",P="GET_RESTAURANTS_REQUEST",B="GET_RESTAURANTS_SUCCESS",Q="GET_RESTAURANTS_FAIL",q="CUSTOMER_LOGIN_REQUEST",J="CUSTOMER_LOGIN_SUCCESS",z="CUSTOMER_LOGIN_FAIL",H="CUSTOMER_LOGOUT",Y="CUSTOMER_REG_REQUEST",$="CUSTOMER_REG_SUCCESS",K="CUSTOMER_REG_FAIL",V=r(71),W="CART_ADD_ITEM",X="CART_REMOVE_ITEM",Z="CART_CLEAR_ITEMS",ee="ORDER_CREATE_REQUEST",te="ORDER_CREATE_SUCCESS",re="ORDER_CREATE_FAIL",ne="ORDER_CREATE_RESET",ae="CUSTOMER_ORDERS_REQUEST",ce="CUSTOMER_ORDERS_SUCCESS",se="CUSTOMER_ORDERS_FAIL",oe="RESTAURANT_ORDERS_REQUEST",ie="RESTAURANT_ORDERS_SUCCESS",de="RESTAURANT_ORDERS_FAIL",ue="CHANGE_ORDER_STATUS_REQUEST",le="CHANGE_ORDER_STATUS_SUCCESS",je="CHANGE_ORDER_STATUS_FAIL",pe=Object(o.combineReducers)({foodList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{foods:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return{loading:!0,foods:[]};case j:return{loading:!1,foods:t.payload};case p:return{loading:!1,error:t.payload};default:return e}},myFoodList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{foods:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{loading:!0,foods:[]};case O:return{loading:!1,foods:t.payload};case h:return{loading:!1,error:t.payload};default:return e}},foodDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{food:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(u.a)({loading:!0},e);case x:return{loading:!1,food:t.payload};case m:return{loading:!1,error:t.payload};default:return e}},foodDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{food:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{loading:!0};case y:return{loading:!1,success:!0};case v:return{loading:!1,error:t.payload};default:return e}},foodEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{food:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{loading:!0};case C:return{loading:!1,success:!0,food:t.payload};case R:return{loading:!1,error:t.payload};case L:return{food:{}};default:return e}},foodAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{food:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{loading:!0};case E:return{loading:!1,success:!0};case I:return{loading:!1,error:t.payload};default:return e}},restaurantUserLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return{loading:!0};case A:return{loading:!1,restaurantUserInfo:t.payload};case N:return{loading:!1,error:t.payload};case F:return{};default:return e}},restaurantUserReg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return{loading:!0};case G:return{loading:!1,restaurantUserInfo:t.payload};case M:return{loading:!1,error:t.payload};default:return e}},restaurantList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{restaurants:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return{loading:!0,restaurants:[]};case B:return{loading:!1,restaurants:t.payload};case Q:return{loading:!1,error:t.payload};default:return e}},publicRestaurantMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{foods:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return{loading:!0};case U:return{loading:!1,foods:t.payload};case w:return{loading:!1,error:t.payload};default:return e}},customerReg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return{loading:!0};case $:return{loading:!1,customerInfo:t.payload};case K:return{loading:!1,error:t.payload};default:return e}},customerLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return{loading:!0};case J:return{loading:!1,customerInfo:t.payload};case z:return{loading:!1,error:t.payload};case H:return{};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:var r=t.payload,n=e.cartItems.find((function(e){return e.restaurant!==r.restaurant}));if(n)return Object(u.a)(Object(u.a)({},e),{},{cartItems:Object(V.a)(e.cartItems),error:"You can only order from one restaurant at a time."});var a=e.cartItems.find((function(e){return e.food===r.food}));return a?Object(u.a)(Object(u.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.food===a.food?r:e})),error:null}):Object(u.a)(Object(u.a)({},e),{},{cartItems:[].concat(Object(V.a)(e.cartItems),[r]),error:null});case X:return Object(u.a)(Object(u.a)({},e),{},{cartItems:e.cartItems.filter((function(e){return e.food!==t.payload})),error:null});case Z:return Object(u.a)(Object(u.a)({},e),{},{cartItems:[]});default:return e}},orderCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return{loading:!0};case te:return{loading:!1,success:!0,order:t.payload};case re:return{loading:!1,error:t.payload};case ne:return{};default:return e}},customerGetsOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return{loading:!0,orders:[]};case ce:return{loading:!1,success:!0,orders:t.payload};case se:return{loading:!1,error:t.payload};default:return e}},restaurantGetsOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return{loading:!0,orders:[]};case ie:return{loading:!1,success:!0,orders:t.payload};case de:return{loading:!1,error:t.payload};default:return e}},changeOrderStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{order:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return{loading:!0};case le:return{loading:!1,success:!0,order:t.payload};case je:return{loading:!1,error:t.payload};default:return e}}}),be={restaurantUserLogin:{restaurantUserInfo:localStorage.getItem("restaurantUserInfo")?JSON.parse(localStorage.getItem("restaurantUserInfo")):null},customerLogin:{customerInfo:localStorage.getItem("customerInfo")?JSON.parse(localStorage.getItem("customerInfo")):null},cart:{cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[]}},Oe=[i.a],he=Object(o.createStore)(pe,be,Object(d.composeWithDevTools)(o.applyMiddleware.apply(void 0,Oe))),fe=r(129),xe=r(18),me=r(15),ge=(r(95),r(1)),ye=function(e){var t=Object.assign({},e),r=Object(s.c)((function(e){return e.restaurantUserLogin})).restaurantUserInfo;return Object(ge.jsx)(n.Fragment,{children:r?Object(ge.jsx)(me.d,Object(u.a)({},t)):Object(ge.jsx)(me.c,{to:"restaurant/login"})})},ve=(r(101),r(139)),Se=r(140),Ee=r(136),Ie=r(35),_e=r(8),Ce=r.n(_e),Re=r(12),Le=r(13),Te=r.n(Le),Ue=function(e,t,r){return function(){var n=Object(Re.a)(Ce.a.mark((function n(a){var c,s,o;return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:D}),c={headers:{"Content-Type":"application/json"}},n.next=5,Te.a.post("/api/restaurants/reg",{name:e,password:t,logo:r},c);case 5:s=n.sent,o=s.data,a({type:G,payload:o}),a({type:A,payload:o}),localStorage.setItem("restaurantUserInfo",JSON.stringify(o)),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),a({type:M,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()},we=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.restaurantUserLogin})).restaurantUserInfo,r=Object(s.c)((function(e){return e.customerLogin})).customerInfo,a=function(){t?e((function(e){localStorage.removeItem("restaurantUserInfo"),e({type:F})})):r&&e((function(e){localStorage.removeItem("customerInfo"),e({type:H})}))};return Object(ge.jsx)(ve.a,{bg:"light",expand:"lg",collapseOnSelect:!0,children:Object(ge.jsxs)(fe.a,{children:[Object(ge.jsx)(ve.a.Brand,{children:"MAKAN"}),Object(ge.jsx)(ve.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(ge.jsx)(ve.a.Collapse,{id:"basic-navbar-nav",children:Object(ge.jsxs)(Se.a,{children:[!t&&Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsx)(Ie.LinkContainer,{exact:!0,to:"/",children:Object(ge.jsx)(Se.a.Link,{children:"Foods"})}),Object(ge.jsx)(Ie.LinkContainer,{exact:!0,to:"/restaurants",children:Object(ge.jsx)(Se.a.Link,{children:"Restaurants"})})]}),r&&Object(ge.jsx)(n.Fragment,{children:Object(ge.jsx)(Ie.LinkContainer,{exact:!0,to:"/myorders",children:Object(ge.jsx)(Se.a.Link,{children:"My Orders"})})}),t&&Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsx)(Ie.LinkContainer,{exact:!0,to:"/orders",children:Object(ge.jsx)(Se.a.Link,{children:"Orders"})}),Object(ge.jsx)(Ie.LinkContainer,{exact:!0,to:"/mymenu",children:Object(ge.jsx)(Se.a.Link,{children:"Menu"})})]}),r&&Object(ge.jsx)(n.Fragment,{children:Object(ge.jsx)(Ee.a,{title:r.email,id:"email",children:Object(ge.jsx)(Ee.a.Item,{onClick:a,children:"Logout"})})}),t&&Object(ge.jsx)(Ee.a,{title:t.name,id:"name",children:Object(ge.jsx)(Ee.a.Item,{onClick:a,children:"Logout"})}),!t&&!r&&Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsx)(Ie.LinkContainer,{to:"/restaurant/login",children:Object(ge.jsxs)(Se.a.Link,{children:[Object(ge.jsx)("i",{className:"fas fa-store"})," Login as Restaurant"]})}),Object(ge.jsx)(Ie.LinkContainer,{to:"/customer/login",children:Object(ge.jsxs)(Se.a.Link,{children:[Object(ge.jsx)("i",{className:"fas fa-user"})," Login as Customer"]})})]}),!t&&Object(ge.jsx)(Ie.LinkContainer,{to:"/customer/cart",children:Object(ge.jsxs)(Se.a.Link,{children:[Object(ge.jsx)("i",{className:"fas fa-shopping-cart"})," Cart"]})})]})})]})})},ke=r(130),Ae=r(85),Ne=function(){return Object(ge.jsx)(fe.a,{children:Object(ge.jsx)(ke.a,{children:Object(ge.jsx)(Ae.a,{className:"text-center py-3 footer",children:"Copyright \xa9 Makan"})})})},Fe=function(e,t,r){return function(){var n=Object(Re.a)(Ce.a.mark((function n(a,c){var s,o,i,d,u;return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:S}),s=c(),o=s.restaurantUserLogin.restaurantUserInfo,i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},n.next=6,Te.a.post("/api/foods/add",{name:e,price:t,image:r},i);case 6:d=n.sent,u=d.data,a({type:E,payload:u}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:I,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},De=r(11),Ge=r(141),Me=r(138),Pe=r(84),Be=function(e){var t=e.food,r=Object(me.k)(),a=Object(n.useState)(1),c=Object(De.a)(a,2),s=c[0],o=c[1];return Object(ge.jsxs)(Ge.a,{className:"my-3 p-3 rounded",children:[Object(ge.jsx)(Ge.a.Img,{src:t.image,variant:"top",className:"card-img-top"}),Object(ge.jsxs)(Ge.a.Body,{children:[Object(ge.jsxs)(Ge.a.Title,{as:"div",children:[t.name," ",Object(ge.jsxs)("strong",{children:["($",t.price,")"]})]}),Object(ge.jsxs)(ke.a,{children:[Object(ge.jsx)(Ae.a,{children:"Qty"}),Object(ge.jsx)(Ae.a,{children:Object(ge.jsxs)(Me.a.Control,{as:"select",value:s,onChange:function(e){return o(e.target.value)},children:[Object(ge.jsx)("option",{children:"1"}),Object(ge.jsx)("option",{children:"2"}),Object(ge.jsx)("option",{children:"3"}),Object(ge.jsx)("option",{children:"4"}),Object(ge.jsx)("option",{children:"5"}),Object(ge.jsx)("option",{children:"6"}),Object(ge.jsx)("option",{children:"7"}),Object(ge.jsx)("option",{children:"8"}),Object(ge.jsx)("option",{children:"9"}),Object(ge.jsx)("option",{children:"10"})]})})]})]}),Object(ge.jsx)(Ge.a.Footer,{children:Object(ge.jsx)(Pe.a,{onClick:function(){r.push("/customer/cart/".concat(t._id,"?qty=").concat(s))},className:"btn-block",type:"button",children:"Add to Cart"})})]})},Qe=r(131),qe=function(e){var t=e.variant,r=e.children;return Object(ge.jsx)(Qe.a,{variant:t,children:r})};qe.defaultProps={variant:"info"};var Je=qe,ze=r(132),He=function(){return Object(ge.jsx)(ze.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(ge.jsx)("span",{className:"sr-only",children:"Loading..."})})},Ye=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.foodList})),r=t.loading,a=t.error,c=t.foods;return Object(n.useEffect)((function(){e(function(){var e=Object(Re.a)(Ce.a.mark((function e(t){var r,n;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:l}),e.next=4,Te.a.get("/api/foods");case 4:r=e.sent,n=r.data,t({type:j,payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:p,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsx)("h1",{children:"Food"}),r?Object(ge.jsx)(He,{}):a?Object(ge.jsx)(Je,{variant:"danger",children:a}):Object(ge.jsx)(ke.a,{children:c.map((function(e){return Object(ge.jsx)(Ae.a,{sm:12,md:6,lg:4,xl:3,children:Object(ge.jsx)(Be,{food:e})},e._id)}))})]})},$e=function(e){var t=e.match,r=Object(s.b)(),a=Object(s.c)((function(e){return e.foodDetails})),c=a.loading,o=a.error,i=a.food;return Object(n.useEffect)((function(){var e;r((e=t.params.foodId,function(){var t=Object(Re.a)(Ce.a.mark((function t(r){var n,a;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:f}),t.next=4,Te.a.get("/api/foods/".concat(e));case 4:n=t.sent,a=n.data,r({type:x,payload:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:m,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[r,t]),Object(ge.jsx)(n.Fragment,{children:c?Object(ge.jsx)(He,{}):o?Object(ge.jsx)(Je,{variant:"danger",children:o}):Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsx)("h1",{children:i.name}),Object(ge.jsx)("p",{children:i.price})]})})},Ke=function(e){var t=e.children;return Object(ge.jsx)(fe.a,{children:Object(ge.jsx)(ke.a,{className:"justify-content-md-center",children:Object(ge.jsx)(Ae.a,{xs:12,md:6,children:t})})})},Ve=function(e){var t=e.location,r=e.history,a=Object(n.useState)(""),c=Object(De.a)(a,2),o=c[0],i=c[1],d=Object(n.useState)(""),u=Object(De.a)(d,2),l=u[0],j=u[1],p=Object(s.b)(),b=Object(s.c)((function(e){return e.restaurantUserLogin})),O=b.loading,h=b.error,f=b.restaurantUserInfo,x=t.search?t.search.split("=")[1]:"/orders";Object(n.useEffect)((function(){f&&r.push(x)}),[r,f,x]);return Object(ge.jsxs)(Ke,{children:[Object(ge.jsx)("h1",{children:"Login as Restaurant"}),h&&Object(ge.jsx)(Je,{variant:"danger",children:h}),O&&Object(ge.jsx)(He,{}),Object(ge.jsxs)(Me.a,{onSubmit:function(e){e.preventDefault(),p(function(e,t){return function(){var r=Object(Re.a)(Ce.a.mark((function r(n){var a,c,s;return Ce.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:k}),a={headers:{"Content-Type":"application/json"}},r.next=5,Te.a.post("/api/restaurants/login",{name:e,password:t},a);case 5:c=r.sent,s=c.data,n({type:A,payload:s}),localStorage.setItem("restaurantUserInfo",JSON.stringify(s)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),n({type:N,payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(o,l))},children:[Object(ge.jsxs)(Me.a.Group,{controlId:"name",children:[Object(ge.jsx)(Me.a.Label,{children:"Name"}),Object(ge.jsx)(Me.a.Control,{type:"text",placeholder:"Enter name",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(ge.jsxs)(Me.a.Group,{controlId:"password",children:[Object(ge.jsx)(Me.a.Label,{children:"Password"}),Object(ge.jsx)(Me.a.Control,{type:"password",placeholder:"Enter password",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(ge.jsx)(Pe.a,{type:"submit",variant:"primary",children:"Login"})]}),Object(ge.jsx)(ke.a,{className:"py-3",children:Object(ge.jsx)(Ae.a,{children:Object(ge.jsx)(xe.Link,{to:"/restaurant/reg",children:"Create a new restaurant account"})})})]})},We=function(e){var t=e.location,r=e.history,a=Object(n.useState)(""),c=Object(De.a)(a,2),o=c[0],i=c[1],d=Object(n.useState)(""),u=Object(De.a)(d,2),l=u[0],j=u[1],p=Object(n.useState)(""),b=Object(De.a)(p,2),O=b[0],h=b[1],f=Object(n.useState)(null),x=Object(De.a)(f,2),m=x[0],g=x[1],y=Object(n.useState)(""),v=Object(De.a)(y,2),S=v[0],E=v[1],I=Object(n.useState)(""),_=Object(De.a)(I,2),C=_[0],R=_[1],L=Object(s.b)(),T=Object(s.c)((function(e){return e.restaurantUserReg})),U=T.loading,w=T.error,k=T.restaurantUserInfo,A=t.search?t.search.split("=")[1]:"/orders";Object(n.useEffect)((function(){k&&r.push(A)}),[r,k,A]);var N=function(){var e=Object(Re.a)(Ce.a.mark((function e(t){var r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),l!==O)g("Passwords do not match!");else try{(r=new FormData).append("file",S),r.append("upload_preset","dpcju0f7"),r.append("cloud_name","dxnyuudyt"),Te.a.post("https://api.cloudinary.com/v1_1/dxnyuudyt/image/upload",r).then((function(e){return L(Ue(o,l,e.data.url))})).catch((function(e){return R("Image failed to upload")}))}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ge.jsxs)(Ke,{children:[Object(ge.jsx)("h1",{children:"Register a Restaurant"}),m&&Object(ge.jsx)(Je,{variant:"danger",children:m}),C&&Object(ge.jsx)(Je,{variant:"danger",children:C}),w&&Object(ge.jsx)(Je,{variant:"danger",children:w}),U&&Object(ge.jsx)(He,{}),Object(ge.jsxs)(Me.a,{onSubmit:N,children:[Object(ge.jsxs)(Me.a.Group,{controlId:"name",children:[Object(ge.jsx)(Me.a.Label,{children:"Name"}),Object(ge.jsx)(Me.a.Control,{type:"text",placeholder:"Enter name",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(ge.jsxs)(Me.a.Group,{controlId:"password",children:[Object(ge.jsx)(Me.a.Label,{children:"Password"}),Object(ge.jsx)(Me.a.Control,{type:"password",placeholder:"Enter password",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(ge.jsxs)(Me.a.Group,{controlId:"confirmPassword",children:[Object(ge.jsx)(Me.a.Label,{children:"Confirm Password"}),Object(ge.jsx)(Me.a.Control,{type:"password",placeholder:"Confirm Password",value:O,onChange:function(e){return h(e.target.value)}})]}),Object(ge.jsxs)(Me.a.Group,{controlId:"logo",children:[Object(ge.jsx)(Me.a.Label,{children:"Logo"}),Object(ge.jsx)(Me.a.File,{required:!0,onChange:function(e){return E(e.target.files[0])}})]}),Object(ge.jsx)(Pe.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(ge.jsx)(ke.a,{className:"py-3",children:Object(ge.jsx)(Ae.a,{children:Object(ge.jsx)(xe.Link,{to:"/restaurant/login",children:"Login to an existing restaurant account"})})})]})},Xe=function(e){var t=e.location,r=e.history,a=Object(n.useState)(""),c=Object(De.a)(a,2),o=c[0],i=c[1],d=Object(n.useState)(""),u=Object(De.a)(d,2),l=u[0],j=u[1],p=Object(s.b)(),b=Object(s.c)((function(e){return e.customerLogin})),O=b.loading,h=b.error,f=b.customerInfo,x=t.search?t.search.split("=")[1]:"/";Object(n.useEffect)((function(){f&&r.push(x)}),[r,f,x]);return Object(ge.jsxs)(Ke,{children:[Object(ge.jsx)("h1",{children:"Login as Customer"}),h&&Object(ge.jsx)(Je,{variant:"danger",children:h}),O&&Object(ge.jsx)(He,{}),Object(ge.jsxs)(Me.a,{onSubmit:function(e){e.preventDefault(),p(function(e,t){return function(){var r=Object(Re.a)(Ce.a.mark((function r(n){var a,c,s;return Ce.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:q}),a={headers:{"Content-Type":"application/json"}},r.next=5,Te.a.post("/api/customers/login",{email:e,password:t},a);case 5:c=r.sent,s=c.data,n({type:J,payload:s}),localStorage.setItem("customerInfo",JSON.stringify(s)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),n({type:z,payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(o,l))},children:[Object(ge.jsxs)(Me.a.Group,{controlId:"email",children:[Object(ge.jsx)(Me.a.Label,{children:"Email Address"}),Object(ge.jsx)(Me.a.Control,{type:"text",placeholder:"Enter email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(ge.jsxs)(Me.a.Group,{controlId:"password",children:[Object(ge.jsx)(Me.a.Label,{children:"Password"}),Object(ge.jsx)(Me.a.Control,{type:"password",placeholder:"Enter password",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(ge.jsx)(Pe.a,{type:"submit",variant:"primary",children:"Login"})]}),Object(ge.jsx)(ke.a,{className:"py-3",children:Object(ge.jsx)(Ae.a,{children:Object(ge.jsx)(xe.Link,{to:"/customer/reg",children:"Create a new customer account"})})})]})},Ze=function(e){var t=e.location,r=e.history,a=Object(n.useState)(""),c=Object(De.a)(a,2),o=c[0],i=c[1],d=Object(n.useState)(""),u=Object(De.a)(d,2),l=u[0],j=u[1],p=Object(n.useState)(""),b=Object(De.a)(p,2),O=b[0],h=b[1],f=Object(n.useState)(null),x=Object(De.a)(f,2),m=x[0],g=x[1],y=Object(s.b)(),v=Object(s.c)((function(e){return e.customerReg})),S=v.loading,E=v.error,I=(v.customerInfo,Object(s.c)((function(e){return e.customerLogin})).customerInfo),_=t.search?t.search.split("=")[1]:"/";Object(n.useEffect)((function(){I&&r.push(_)}),[r,I,_]);return Object(ge.jsxs)(Ke,{children:[Object(ge.jsx)("h1",{children:"Register as Customer"}),m&&Object(ge.jsx)(Je,{variant:"danger",children:m}),E&&Object(ge.jsx)(Je,{variant:"danger",children:E}),S&&Object(ge.jsx)(He,{}),Object(ge.jsxs)(Me.a,{onSubmit:function(e){e.preventDefault(),l!==O?g("Passwords do not match!"):y(function(e,t){return function(){var r=Object(Re.a)(Ce.a.mark((function r(n){var a,c,s;return Ce.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:Y}),a={headers:{"Content-Type":"application/json"}},r.next=5,Te.a.post("/api/customers/reg",{email:e,password:t},a);case 5:c=r.sent,s=c.data,n({type:$,payload:s}),n({type:J,payload:s}),localStorage.setItem("customerInfo",JSON.stringify(s)),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),n({type:K,payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}()}(o,l))},children:[Object(ge.jsxs)(Me.a.Group,{controlId:"email",children:[Object(ge.jsx)(Me.a.Label,{children:"Email Address"}),Object(ge.jsx)(Me.a.Control,{type:"email",placeholder:"Enter email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(ge.jsxs)(Me.a.Group,{controlId:"password",children:[Object(ge.jsx)(Me.a.Label,{children:"Password"}),Object(ge.jsx)(Me.a.Control,{type:"password",placeholder:"Enter password",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(ge.jsxs)(Me.a.Group,{controlId:"confirmPassword",children:[Object(ge.jsx)(Me.a.Label,{children:"Confirm Password"}),Object(ge.jsx)(Me.a.Control,{type:"password",placeholder:"Confirm Password",value:O,onChange:function(e){return h(e.target.value)}})]}),Object(ge.jsx)(Pe.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(ge.jsx)(ke.a,{className:"py-3",children:Object(ge.jsx)(Ae.a,{children:Object(ge.jsx)(xe.Link,{to:"/customer/login",children:"Login to existing customer account"})})})]})},et=r(133),tt=r(137),rt=function(){var e=Object(n.useState)(!1),t=Object(De.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),o=Object(De.a)(c,2),i=o[0],d=o[1],u=Object(n.useState)(0),l=Object(De.a)(u,2),j=l[0],p=l[1],b=Object(n.useState)(""),O=Object(De.a)(b,2),h=O[0],f=O[1],x=Object(n.useState)(""),m=Object(De.a)(x,2),g=m[0],y=m[1],v=Object(s.b)(),S=Object(s.c)((function(e){return e.foodAdd})),E=S.loading,I=S.error,_=S.success,C=function(){return a(!1)};Object(n.useEffect)((function(){_&&C()}),[_]);var R=function(){var e=Object(Re.a)(Ce.a.mark((function e(t){var r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(r=new FormData).append("file",h),r.append("upload_preset","dpcju0f7"),r.append("cloud_name","dxnyuudyt"),Te.a.post("https://api.cloudinary.com/v1_1/dxnyuudyt/image/upload",r).then((function(e){return v(Fe(i,j,e.data.url))})).catch((function(e){return y("Image failed to upload")})),d(""),p(0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsxs)(Pe.a,{onClick:function(){return a(!0)},children:[Object(ge.jsx)("i",{className:"fas fa-plus"})," Add food"]}),Object(ge.jsxs)(tt.a,{show:r,onHide:C,backdrop:"static",keyboard:!1,children:[Object(ge.jsx)(tt.a.Header,{closeButton:!0,children:Object(ge.jsx)(tt.a.Title,{children:"Add food"})}),g&&Object(ge.jsx)(Je,{variant:"danger",children:g}),I&&Object(ge.jsx)(Je,{variant:"danger",children:I}),E&&Object(ge.jsx)(He,{}),Object(ge.jsxs)(Me.a,{onSubmit:R,children:[Object(ge.jsxs)(tt.a.Body,{children:[Object(ge.jsxs)(Me.a.Group,{controlId:"name",children:[Object(ge.jsx)(Me.a.Label,{children:"Name"}),Object(ge.jsx)(Me.a.Control,{required:!0,type:"text",placeholder:"Enter name",value:i,onChange:function(e){return d(e.target.value)}})]}),Object(ge.jsxs)(Me.a.Group,{controlId:"price",children:[Object(ge.jsx)(Me.a.Label,{children:"Price ($)"}),Object(ge.jsx)(Me.a.Control,{required:!0,type:"number",min:"0.01",step:"0.01",placeholder:"Enter price",value:j,onChange:function(e){return p(e.target.value)}})]}),Object(ge.jsxs)(Me.a.Group,{controlId:"image",children:[Object(ge.jsx)(Me.a.Label,{children:"Image"}),Object(ge.jsx)(Me.a.File,{required:!0,onChange:function(e){return f(e.target.files[0])}})]})]}),Object(ge.jsx)(tt.a.Footer,{children:Object(ge.jsx)(Pe.a,{type:"submit",variant:"primary",children:"Confirm"})})]})]})]})},nt=function(e){var t=e.food,r=Object(n.useState)(!1),a=Object(De.a)(r,2),c=a[0],o=a[1],i=Object(n.useState)(t.name),d=Object(De.a)(i,2),u=d[0],l=d[1],j=Object(n.useState)(t.price),p=Object(De.a)(j,2),b=p[0],O=p[1],h=Object(s.b)(),f=Object(s.c)((function(e){return e.foodEdit})),x=f.loading,m=f.error,g=f.success,y=function(){return o(!1)};Object(n.useEffect)((function(){g&&y()}),[g]);return Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsx)(Pe.a,{variant:"light",className:"btn-sm",onClick:function(){return o(!0)},children:Object(ge.jsx)("i",{className:"fas fa-edit"})}),Object(ge.jsxs)(tt.a,{show:c,onHide:y,backdrop:"static",keyboard:!1,children:[Object(ge.jsx)(tt.a.Header,{closeButton:!0,children:Object(ge.jsx)(tt.a.Title,{children:"Add food"})}),m&&Object(ge.jsx)(Je,{variant:"danger",children:m}),x&&Object(ge.jsx)(He,{}),Object(ge.jsxs)(Me.a,{onSubmit:function(e){e.preventDefault(),h(function(e){return function(){var t=Object(Re.a)(Ce.a.mark((function t(r,n){var a,c,s,o,i;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:_}),a=n(),c=a.restaurantUserLogin.restaurantUserInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,Te.a.put("/api/foods/".concat(e._id),e,s);case 6:o=t.sent,i=o.data,r({type:C,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:R,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()}({_id:t._id,name:u,price:b}))},children:[Object(ge.jsxs)(tt.a.Body,{children:[Object(ge.jsxs)(Me.a.Group,{controlId:"name",children:[Object(ge.jsx)(Me.a.Label,{children:"Name"}),Object(ge.jsx)(Me.a.Control,{type:"text",placeholder:"Enter name",value:u,onChange:function(e){return l(e.target.value)}})]}),Object(ge.jsxs)(Me.a.Group,{controlId:"price",children:[Object(ge.jsx)(Me.a.Label,{children:"Price"}),Object(ge.jsx)(Me.a.Control,{type:"number",min:"0.00",step:"0.01",placeholder:"Enter price",value:b,onChange:function(e){return O(e.target.value)}})]})]}),Object(ge.jsx)(tt.a.Footer,{children:Object(ge.jsx)(Pe.a,{type:"submit",variant:"warning",children:"Modify"})})]})]})]})},at=function(e){var t=e.history,r=(e.match,Object(s.b)()),a=Object(s.c)((function(e){return e.myFoodList})),c=a.loading,o=a.error,i=a.foods,d=Object(s.c)((function(e){return e.restaurantUserLogin})).restaurantUserInfo,u=Object(s.c)((function(e){return e.foodDelete})),l=u.loading,j=u.error,p=u.success,f=Object(s.c)((function(e){return e.foodAdd})).success,x=Object(s.c)((function(e){return e.foodEdit})).success;Object(n.useEffect)((function(){d?r(function(){var e=Object(Re.a)(Ce.a.mark((function e(t,r){var n,a,c,s,o;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:b}),n=r(),a=n.restaurantUserLogin.restaurantUserInfo,c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}},e.next=6,Te.a.get("/api/foods/mymenu",c);case 6:s=e.sent,o=s.data,t({type:O,payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:h,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()):t.push("/restaurant/login")}),[r,t,d,p,f,x]);var m=function(e){window.confirm("Confirm delete?")&&r(function(e){return function(){var t=Object(Re.a)(Ce.a.mark((function t(r,n){var a,c,s;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:g}),a=n(),c=a.restaurantUserLogin.restaurantUserInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,Te.a.delete("/api/foods/".concat(e),s);case 6:r({type:y}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:v,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r){return t.apply(this,arguments)}}()}(e))};return Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsxs)(ke.a,{className:"align-items-center",children:[Object(ge.jsx)(Ae.a,{className:"col-auto mr-auto",children:Object(ge.jsx)("h1",{children:"Food"})}),Object(ge.jsx)(Ae.a,{className:"col-auto",children:Object(ge.jsx)(rt,{})})]}),l&&Object(ge.jsx)(He,{}),j&&Object(ge.jsx)(Je,{variant:"danger",children:j}),l&&Object(ge.jsx)(He,{}),c?Object(ge.jsx)(He,{}):o?Object(ge.jsx)(Je,{variant:"danger",children:o}):Object(ge.jsxs)(et.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(ge.jsx)("thead",{children:Object(ge.jsxs)("tr",{children:[Object(ge.jsx)("th",{children:"NAME"}),Object(ge.jsx)("th",{children:"PRICE"}),Object(ge.jsx)("th",{})]})}),Object(ge.jsx)("tbody",{children:i.map((function(e){return Object(ge.jsxs)("tr",{children:[Object(ge.jsx)("td",{children:e.name}),Object(ge.jsxs)("td",{children:["$",e.price]}),Object(ge.jsxs)("td",{children:[Object(ge.jsx)(nt,{food:e}),Object(ge.jsx)(Pe.a,{variant:"danger",className:"btn-sm",onClick:function(){return m(e._id)},children:Object(ge.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]})]})},ct=r(142),st=r(134),ot=function(e,t){return function(){var r=Object(Re.a)(Ce.a.mark((function r(n,a){var c,s;return Ce.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Te.a.get("/api/foods/".concat(e));case 2:c=r.sent,s=c.data,n({type:W,payload:{food:s._id,name:s.name,price:s.price,image:s.image,restaurant:s.restaurant,qty:t}}),localStorage.setItem("cartItems",JSON.stringify(a().cart.cartItems));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},it=function(e){var t=e.match,r=e.location,a=e.history,c=t.params.id,o=r.search?Number(r.search.split("=")[1]):1,i=Object(s.b)(),d=Object(s.c)((function(e){return e.cart})),u=d.cartItems,l=d.error,j=Object(s.c)((function(e){return e.customerLogin})).customerInfo,p=Object(s.c)((function(e){return e.orderCreate})).error;Object(n.useEffect)((function(){c&&i(ot(c,o))}),[i,c,o]);var b=function(e){i(function(e){return function(){var t=Object(Re.a)(Ce.a.mark((function t(r,n){return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:X,payload:e}),localStorage.setItem("cartItems",JSON.stringify(n().cart.cartItems));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(e))};return Object(ge.jsxs)(ke.a,{children:[Object(ge.jsxs)(Ae.a,{md:8,children:[Object(ge.jsx)("h1",{children:"Orders"}),l&&Object(ge.jsx)(Je,{variant:"danger",children:l}),0===u.length?Object(ge.jsxs)(Je,{children:["You have not added any orders to cart. ",Object(ge.jsx)(xe.Link,{to:"/",children:"Menu"})]}):Object(ge.jsx)(ct.a,{variant:"flush",children:u.map((function(e){return Object(ge.jsx)(ct.a.Item,{children:Object(ge.jsxs)(ke.a,{children:[Object(ge.jsx)(Ae.a,{md:2,children:Object(ge.jsx)(st.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(ge.jsx)(Ae.a,{md:3,children:e.name}),Object(ge.jsxs)(Ae.a,{md:2,children:["$",e.price]}),Object(ge.jsx)(Ae.a,{md:2,children:Object(ge.jsxs)(Me.a.Control,{as:"select",value:e.qty,onChange:function(t){return i(ot(e.food,Number(t.target.value)))},children:[Object(ge.jsx)("option",{children:"1"}),Object(ge.jsx)("option",{children:"2"}),Object(ge.jsx)("option",{children:"3"}),Object(ge.jsx)("option",{children:"4"}),Object(ge.jsx)("option",{children:"5"}),Object(ge.jsx)("option",{children:"6"}),Object(ge.jsx)("option",{children:"7"}),Object(ge.jsx)("option",{children:"8"}),Object(ge.jsx)("option",{children:"9"}),Object(ge.jsx)("option",{children:"10"})]})}),Object(ge.jsx)(Ae.a,{md:2,children:Object(ge.jsx)(Pe.a,{variant:"light",onClick:function(){return b(e.food)},children:Object(ge.jsx)("i",{className:"fas fa-trash"})})})]})},e.food)}))})]}),Object(ge.jsx)(Ae.a,{md:4,children:Object(ge.jsx)(Ge.a,{children:Object(ge.jsxs)(ct.a,{variant:"flush",children:[Object(ge.jsx)(ct.a.Item,{children:Object(ge.jsx)("h2",{children:"ORDER SUMMARY"})}),Object(ge.jsx)(ct.a.Item,{children:Object(ge.jsxs)(ke.a,{children:[Object(ge.jsx)(Ae.a,{children:"No. of packets"}),Object(ge.jsx)(Ae.a,{children:u.reduce((function(e,t){return e+t.qty}),0)})]})}),Object(ge.jsx)(ct.a.Item,{children:Object(ge.jsxs)(ke.a,{children:[Object(ge.jsx)(Ae.a,{children:"Subtotal"}),Object(ge.jsxs)(Ae.a,{children:["$",u.reduce((function(e,t){return e+t.qty*t.price}),0).toFixed(2)]})]})}),Object(ge.jsxs)(ct.a.Item,{children:[p&&Object(ge.jsx)(Je,{variant:"danger",children:p}),j?Object(ge.jsx)(Pe.a,{className:"btn-block",disabled:0===u.length,onClick:function(e){var t;i((t={orderItems:d.cartItems,restaurant:d.cartItems[0].restaurant},function(){var e=Object(Re.a)(Ce.a.mark((function e(r,n){var a,c,s,o,i;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:ee}),a=n(),c=a.customerLogin.customerInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,Te.a.post("/api/orders",t,s);case 6:o=e.sent,i=o.data,r({type:te,payload:i}),r({type:Z,payload:i}),localStorage.removeItem("cartItems"),r({type:ne,payload:i}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r({type:re,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}())),a.push("/myorders")},children:"Confirm order"}):Object(ge.jsx)(Pe.a,{className:"btn-block",disabled:0===u.length,onClick:function(){a.push("/customer/login?redirect=cart")},children:"Log in to Checkout"})]})]})})})]})},dt=function(e){var t=e.restaurant;return Object(ge.jsxs)(Ge.a,{className:"my-3 p-3 rounded",children:[Object(ge.jsx)(Ge.a.Img,{src:t.logo,variant:"top",className:"card-img-top"}),Object(ge.jsx)(Ge.a.Body,{children:Object(ge.jsx)(Ge.a.Title,{as:"div",children:t.name})}),Object(ge.jsx)(Ge.a.Footer,{children:Object(ge.jsx)(xe.Link,{to:"/restaurants/".concat(t._id,"/menu"),children:Object(ge.jsx)(Pe.a,{className:"btn-block",type:"button",children:"Menu"})})})]})},ut=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.restaurantList})),r=t.loading,a=t.error,c=t.restaurants;return Object(n.useEffect)((function(){e(function(){var e=Object(Re.a)(Ce.a.mark((function e(t){var r,n;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:P}),e.next=4,Te.a.get("/api/restaurants");case 4:r=e.sent,n=r.data,t({type:B,payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:Q,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsx)("h1",{children:"Restaurants"}),r?Object(ge.jsx)(He,{}):a?Object(ge.jsx)(Je,{variant:"danger",children:a}):Object(ge.jsx)(ke.a,{children:c.map((function(e){return Object(ge.jsx)(Ae.a,{sm:12,md:6,lg:4,xl:3,children:Object(ge.jsx)(dt,{restaurant:e})},e._id)}))})]})},lt=function(e){var t=e.match,r=Object(s.b)(),a=Object(s.c)((function(e){return e.publicRestaurantMenu})),c=a.loading,o=a.error,i=a.foods;return Object(n.useEffect)((function(){var e;r((e=t.params.restaurantId,function(){var t=Object(Re.a)(Ce.a.mark((function t(r){var n,a;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:T}),t.next=4,Te.a.get("/api/foods/restaurants/".concat(e));case 4:n=t.sent,a=n.data,r({type:U,payload:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:w,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[r,t]),Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsx)("h1",{children:"Food"}),c?Object(ge.jsx)(He,{}):o?Object(ge.jsx)(Je,{variant:"danger",children:o}):Object(ge.jsx)(ke.a,{children:i.map((function(e){return Object(ge.jsx)(Ae.a,{sm:12,md:6,lg:4,xl:3,children:Object(ge.jsx)(Be,{food:e})},e._id)}))})]})},jt=r(135),pt=function(e){var t=e.history,r=Object(s.b)(),a=Object(s.c)((function(e){return e.customerGetsOrders})),c=a.loading,o=a.error,i=a.orders,d=Object(s.c)((function(e){return e.customerLogin})).customerInfo,u=Object(s.c)((function(e){return e.orderCreate})).success;return Object(n.useEffect)((function(){d?r(function(){var e=Object(Re.a)(Ce.a.mark((function e(t,r){var n,a,c,s,o;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:ae}),n=r(),a=n.customerLogin.customerInfo,c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}},e.next=6,Te.a.get("/api/orders",c);case 6:s=e.sent,o=s.data,t({type:ce,payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:se,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()):t.push("/customer/login")}),[r,t,d,u]),Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsx)(ke.a,{className:"align-items-center",children:Object(ge.jsx)(Ae.a,{className:"col-auto mr-auto",children:Object(ge.jsx)("h1",{children:"Orders"})})}),c?Object(ge.jsx)(He,{}):o?Object(ge.jsx)(Je,{variant:"danger",children:o}):Object(ge.jsxs)(et.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(ge.jsx)("thead",{children:Object(ge.jsxs)("tr",{children:[Object(ge.jsx)("th",{children:"Food"}),Object(ge.jsx)("th",{children:"Qty"}),Object(ge.jsx)("th",{children:"Restaurant"}),Object(ge.jsx)("th",{children:"Status"})]})}),Object(ge.jsx)("tbody",{children:i.map((function(e){return Object(ge.jsxs)("tr",{children:[Object(ge.jsx)("td",{children:e.orderItems.map((function(e){return Object(ge.jsx)("p",{children:e.food.name})}))}),Object(ge.jsx)("td",{children:e.orderItems.map((function(e){return Object(ge.jsx)("p",{children:e.qty})}))}),Object(ge.jsx)("td",{children:e.restaurant.name}),Object(ge.jsx)("td",{children:Object(ge.jsx)(jt.a,{variant:"Pending"===e.status?"danger":"Preparing"===e.status?"warning":"success",children:e.status})})]},e._id)}))})]})]})},bt=function(e){var t=e.history,r=Object(s.b)(),a=Object(s.c)((function(e){return e.restaurantGetsOrders})),c=a.loading,o=a.error,i=a.orders,d=Object(s.c)((function(e){return e.changeOrderStatus})),u=(d.loading,d.success),l=(d.error,Object(s.c)((function(e){return e.restaurantUserLogin})).restaurantUserInfo),j=Object(s.c)((function(e){return e.orderCreate})).success;Object(n.useEffect)((function(){l?r(function(){var e=Object(Re.a)(Ce.a.mark((function e(t,r){var n,a,c,s,o;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:oe}),n=r(),a=n.restaurantUserLogin.restaurantUserInfo,c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}},e.next=6,Te.a.get("/api/orders/restaurant",c);case 6:s=e.sent,o=s.data,t({type:ie,payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:de,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()):t.push("/customer/login")}),[r,t,l,j,u]);var p=function(e){r(function(e){return function(){var t=Object(Re.a)(Ce.a.mark((function t(r,n){var a,c,s,o,i;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:ue}),a=n(),c=a.restaurantUserLogin.restaurantUserInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,Te.a.put("/api/orders/".concat(e._id),e,s);case 6:o=t.sent,i=o.data,r({type:le,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:je,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()}(e))};return Object(ge.jsxs)(n.Fragment,{children:[Object(ge.jsx)(ke.a,{className:"align-items-center",children:Object(ge.jsx)(Ae.a,{className:"col-auto mr-auto",children:Object(ge.jsx)("h1",{children:"Orders"})})}),c?Object(ge.jsx)(He,{}):o?Object(ge.jsx)(Je,{variant:"danger",children:o}):Object(ge.jsxs)(et.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(ge.jsx)("thead",{children:Object(ge.jsxs)("tr",{children:[Object(ge.jsx)("th",{children:"Food"}),Object(ge.jsx)("th",{children:"Qty"}),Object(ge.jsx)("th",{children:"Status"})]})}),Object(ge.jsx)("tbody",{children:i.map((function(e){return Object(ge.jsxs)("tr",{children:[Object(ge.jsx)("td",{children:e.orderItems.map((function(e){return Object(ge.jsx)("p",{children:e.food.name},e.food._id)}))}),Object(ge.jsx)("td",{children:e.orderItems.map((function(e){return Object(ge.jsx)("p",{children:e.qty},e.food._id)}))}),Object(ge.jsx)("td",{children:Object(ge.jsx)(Pe.a,{variant:"Pending"===e.status?"danger":"Preparing"===e.status?"warning":"success",onClick:function(){return p(e)},children:e.status})})]},e._id)}))})]})]})},Ot=function(){return Object(ge.jsxs)(xe.BrowserRouter,{children:[Object(ge.jsx)(we,{}),Object(ge.jsx)("main",{className:"py-3",children:Object(ge.jsx)(fe.a,{children:Object(ge.jsxs)(me.g,{children:[Object(ge.jsx)(me.d,{exact:!0,path:"/",component:Ye}),Object(ge.jsx)(me.d,{exact:!0,path:"/orders",component:bt}),Object(ge.jsx)(me.d,{exact:!0,path:"/myorders",component:pt}),Object(ge.jsx)(me.d,{exact:!0,path:"/restaurant/login",component:Ve}),Object(ge.jsx)(me.d,{exact:!0,path:"/restaurant/reg",component:We}),Object(ge.jsx)(me.d,{exact:!0,path:"/restaurants/:restaurantId/menu",component:lt}),Object(ge.jsx)(me.d,{exact:!0,path:"/restaurants",component:ut}),Object(ge.jsx)(me.d,{exact:!0,path:"/customer/login",component:Xe}),Object(ge.jsx)(me.d,{exact:!0,path:"/customer/reg",component:Ze}),Object(ge.jsx)(me.d,{exact:!0,path:"/customer/cart/:id?",component:it}),Object(ge.jsx)(me.d,{exact:!0,path:"/foods/:foodId",component:$e}),Object(ge.jsx)(ye,{exact:!0,path:"/mymenu",component:at})]})})}),Object(ge.jsx)(Ne,{})]})},ht=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,143)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};c.a.render(Object(ge.jsx)(s.a,{store:he,children:Object(ge.jsx)(Ot,{})}),document.getElementById("root")),ht()},95:function(e,t,r){}},[[124,1,2]]]);
//# sourceMappingURL=main.102ff303.chunk.js.map